<header class="topbar">
  <span class="app-title">LMS</span>
  <span class="spacer"></span>

  <!-- Notifications (Admin Only) -->
  <button *ngIf="role === 'Admin'" mat-icon-button [matMenuTriggerFor]="notificationsMenu" class="notification-btn">
    <mat-icon [matBadge]="unreadCount" [matBadgeHidden]="unreadCount === 0" matBadgeColor="warn">
      notifications
    </mat-icon>
  </button>

  <mat-menu #notificationsMenu="matMenu" class="notifications-menu">
    <div class="notifications-header" (click)="$event.stopPropagation()">
      <h3>Notifications</h3>
    </div>
    <div class="notifications-list">
      <div *ngIf="notifications.length === 0" class="no-notifications">
        No notifications
      </div>
      <button mat-menu-item *ngFor="let notification of notifications"
        (click)="markAsRead(notification); $event.stopPropagation()" [class.unread]="!notification.isRead">
        <div class="notification-item-content">
          <div class="message">{{ notification.message }}</div>
          <div class="time">{{ notification.createdAt | date:'short' }}</div>
        </div>
      </button>
    </div>
  </mat-menu>

  <button mat-icon-button color="warn" (click)="logout()" matTooltip="Logout">
    <mat-icon>logout</mat-icon>
  </button>
</header>

<app-sidebar></app-sidebar>

<main class="content">
  <router-outlet></router-outlet>
</main>